/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import {
  CrawlingJobData,
  CrawlingJobData$zodSchema,
} from "./crawlingjobdata.js";

/**
 * Detailed progress object
 */
export type Progress = {
  percentage?: number | undefined;
  current?: number | undefined;
  total?: number | undefined;
};

export const Progress$zodSchema: z.ZodType<Progress> = z.object({
  current: z.int().optional(),
  percentage: z.number().optional(),
  total: z.int().optional(),
}).describe("Detailed progress object");

/**
 * Job progress information (can be number 0-100 or object with percentage/current/total)
 */
export type ProgressUnion = number | Progress;

export const ProgressUnion$zodSchema: z.ZodType<ProgressUnion> = z.union([
  z.number(),
  z.lazy(() => Progress$zodSchema),
]).describe(
  "Job progress information (can be number 0-100 or object with percentage/current/total)",
);

/**
 * Current state of the job in the queue:<br>
 *
 * @remarks
 * <ul>
 * <li><b>waiting</b>: Queued and waiting to be processed</li>
 * <li><b>active</b>: Currently being processed by a worker</li>
 * <li><b>completed</b>: Successfully finished</li>
 * <li><b>failed</b>: Failed after all retry attempts</li>
 * <li><b>delayed</b>: Scheduled to run at a future time</li>
 * <li><b>paused</b>: Manually paused by user</li>
 * <li><b>stuck</b>: Job is stuck (worker crashed mid-processing)</li>
 * </ul>
 */
export const State = {
  Waiting: "waiting",
  Active: "active",
  Completed: "completed",
  Failed: "failed",
  Delayed: "delayed",
  Paused: "paused",
  Stuck: "stuck",
} as const;
/**
 * Current state of the job in the queue:<br>
 *
 * @remarks
 * <ul>
 * <li><b>waiting</b>: Queued and waiting to be processed</li>
 * <li><b>active</b>: Currently being processed by a worker</li>
 * <li><b>completed</b>: Successfully finished</li>
 * <li><b>failed</b>: Failed after all retry attempts</li>
 * <li><b>delayed</b>: Scheduled to run at a future time</li>
 * <li><b>paused</b>: Manually paused by user</li>
 * <li><b>stuck</b>: Job is stuck (worker crashed mid-processing)</li>
 * </ul>
 */
export type State = ClosedEnum<typeof State>;

export const State$zodSchema = z.enum([
  "waiting",
  "active",
  "completed",
  "failed",
  "delayed",
  "paused",
  "stuck",
]).describe(
  "Current state of the job in the queue:<br>\n<ul>\n<li><b>waiting</b>: Queued and waiting to be processed</li>\n<li><b>active</b>: Currently being processed by a worker</li>\n<li><b>completed</b>: Successfully finished</li>\n<li><b>failed</b>: Failed after all retry attempts</li>\n<li><b>delayed</b>: Scheduled to run at a future time</li>\n<li><b>paused</b>: Manually paused by user</li>\n<li><b>stuck</b>: Job is stuck (worker crashed mid-processing)</li>\n</ul>\n",
);

/**
 * Complete status information for a crawling job
 */
export type JobStatus = {
  id?: string | null | undefined;
  name: string;
  data: CrawlingJobData;
  progress?: number | Progress | undefined;
  delay?: number | null | undefined;
  timestamp: number;
  attemptsMade: number;
  finishedOn?: number | null | undefined;
  processedOn?: number | null | undefined;
  failedReason?: string | null | undefined;
  state: State;
};

export const JobStatus$zodSchema: z.ZodType<JobStatus> = z.object({
  attemptsMade: z.int(),
  data: CrawlingJobData$zodSchema,
  delay: z.int().nullable().optional(),
  failedReason: z.string().nullable().optional(),
  finishedOn: z.int().nullable().optional(),
  id: z.string().nullable().optional(),
  name: z.string(),
  processedOn: z.int().nullable().optional(),
  progress: z.union([
    z.number(),
    z.lazy(() => Progress$zodSchema),
  ]).optional(),
  state: State$zodSchema,
  timestamp: z.int(),
}).describe("Complete status information for a crawling job");
