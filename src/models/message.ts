/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import {
  CitationReference,
  CitationReference$zodSchema,
} from "./citationreference.js";
import {
  FollowUpQuestion,
  FollowUpQuestion$zodSchema,
} from "./followupquestion.js";
import {
  MessageFeedback,
  MessageFeedback$zodSchema,
} from "./messagefeedback.js";

/**
 * Type of message:
 *
 * @remarks
 * <ul>
 * <li><code>user_query</code> - User's question or input</li>
 * <li><code>bot_response</code> - AI-generated response</li>
 * <li><code>error</code> - Error message from the system</li>
 * <li><code>feedback</code> - User feedback on a response</li>
 * <li><code>system</code> - System notification or status</li>
 * </ul>
 */
export const MessageType = {
  UserQuery: "user_query",
  BotResponse: "bot_response",
  Error: "error",
  Feedback: "feedback",
  System: "system",
} as const;
/**
 * Type of message:
 *
 * @remarks
 * <ul>
 * <li><code>user_query</code> - User's question or input</li>
 * <li><code>bot_response</code> - AI-generated response</li>
 * <li><code>error</code> - Error message from the system</li>
 * <li><code>feedback</code> - User feedback on a response</li>
 * <li><code>system</code> - System notification or status</li>
 * </ul>
 */
export type MessageType = ClosedEnum<typeof MessageType>;

export const MessageType$zodSchema = z.enum([
  "user_query",
  "bot_response",
  "error",
  "feedback",
  "system",
]).describe(
  "Type of message:\n<ul>\n<li><code>user_query</code> - User's question or input</li>\n<li><code>bot_response</code> - AI-generated response</li>\n<li><code>error</code> - Error message from the system</li>\n<li><code>feedback</code> - User feedback on a response</li>\n<li><code>system</code> - System notification or status</li>\n</ul>\n",
);

/**
 * Format of the content for rendering
 */
export const ContentFormat = {
  Markdown: "MARKDOWN",
  Json: "JSON",
  Html: "HTML",
} as const;
/**
 * Format of the content for rendering
 */
export type ContentFormat = ClosedEnum<typeof ContentFormat>;

export const ContentFormat$zodSchema = z.enum([
  "MARKDOWN",
  "JSON",
  "HTML",
]).describe("Format of the content for rendering");

export type MessageMetadata = {
  processingTimeMs?: number | undefined;
  modelVersion?: string | undefined;
  aiTransactionId?: string | undefined;
  reason?: string | undefined;
};

export const MessageMetadata$zodSchema: z.ZodType<MessageMetadata> = z.object({
  aiTransactionId: z.string().optional(),
  modelVersion: z.string().optional(),
  processingTimeMs: z.number().optional(),
  reason: z.string().optional(),
});

/**
 * A single message within a conversation. Messages can be user queries,
 *
 * @remarks
 * AI responses, system messages, or error notifications.
 */
export type Message = {
  _id?: string | undefined;
  messageType?: MessageType | undefined;
  content?: string | undefined;
  contentFormat?: ContentFormat | undefined;
  citations?: Array<CitationReference> | undefined;
  confidence?: string | undefined;
  followUpQuestions?: Array<FollowUpQuestion> | undefined;
  feedback?: Array<MessageFeedback> | undefined;
  metadata?: MessageMetadata | undefined;
  createdAt?: string | undefined;
  updatedAt?: string | undefined;
};

export const Message$zodSchema: z.ZodType<Message> = z.object({
  _id: z.string().optional(),
  citations: z.array(CitationReference$zodSchema).optional(),
  confidence: z.string().optional(),
  content: z.string().optional(),
  contentFormat: ContentFormat$zodSchema.default("MARKDOWN"),
  createdAt: z.iso.datetime({ offset: true }).optional(),
  feedback: z.array(MessageFeedback$zodSchema).optional(),
  followUpQuestions: z.array(FollowUpQuestion$zodSchema).optional(),
  messageType: MessageType$zodSchema.optional(),
  metadata: z.lazy(() => MessageMetadata$zodSchema).optional(),
  updatedAt: z.iso.datetime({ offset: true }).optional(),
}).describe(
  "A single message within a conversation. Messages can be user queries,\nAI responses, system messages, or error notifications.\n",
);
