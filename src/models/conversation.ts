/*
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */

import * as z from "zod";
import { ClosedEnum } from "../types/enums.js";
import { Message, Message$zodSchema } from "./message.js";

/**
 * Current status of the conversation:
 *
 * @remarks
 * <ul>
 * <li><code>INPROGRESS</code> - AI is processing</li>
 * <li><code>COMPLETED</code> - Response ready</li>
 * <li><code>FAILED</code> - Error occurred</li>
 * </ul>
 */
export const ConversationStatus = {
  Inprogress: "INPROGRESS",
  Completed: "COMPLETED",
  Failed: "FAILED",
} as const;
/**
 * Current status of the conversation:
 *
 * @remarks
 * <ul>
 * <li><code>INPROGRESS</code> - AI is processing</li>
 * <li><code>COMPLETED</code> - Response ready</li>
 * <li><code>FAILED</code> - Error occurred</li>
 * </ul>
 */
export type ConversationStatus = ClosedEnum<typeof ConversationStatus>;

export const ConversationStatus$zodSchema = z.enum([
  "INPROGRESS",
  "COMPLETED",
  "FAILED",
]).describe(
  "Current status of the conversation:\n<ul>\n<li><code>INPROGRESS</code> - AI is processing</li>\n<li><code>COMPLETED</code> - Response ready</li>\n<li><code>FAILED</code> - Error occurred</li>\n</ul>\n",
);

/**
 * AI model configuration used
 */
export type ModelInfo = {
  modelKey?: string | undefined;
  modelName?: string | undefined;
  modelProvider?: string | undefined;
  chatMode?: string | undefined;
};

export const ModelInfo$zodSchema: z.ZodType<ModelInfo> = z.object({
  chatMode: z.string().optional(),
  modelKey: z.string().optional(),
  modelName: z.string().optional(),
  modelProvider: z.string().optional(),
}).describe("AI model configuration used");

export const ConversationAccessLevel = {
  Read: "read",
  Write: "write",
} as const;
export type ConversationAccessLevel = ClosedEnum<
  typeof ConversationAccessLevel
>;

export const ConversationAccessLevel$zodSchema = z.enum([
  "read",
  "write",
]);

export type ConversationSharedWith = {
  userId?: string | undefined;
  accessLevel?: ConversationAccessLevel | undefined;
};

export const ConversationSharedWith$zodSchema: z.ZodType<
  ConversationSharedWith
> = z.object({
  accessLevel: ConversationAccessLevel$zodSchema.optional(),
  userId: z.string().optional(),
});

/**
 * A conversation represents a chat session between a user and the AI.
 *
 * @remarks
 * Conversations maintain context across multiple messages and can be
 * shared, archived, and organized.
 */
export type Conversation = {
  _id?: string | undefined;
  userId?: string | undefined;
  orgId?: string | undefined;
  title?: string | undefined;
  initiator?: string | undefined;
  messages?: Array<Message> | undefined;
  status?: ConversationStatus | undefined;
  failReason?: string | undefined;
  modelInfo?: ModelInfo | undefined;
  isShared?: boolean | undefined;
  shareLink?: string | undefined;
  sharedWith?: Array<ConversationSharedWith> | undefined;
  isArchived?: boolean | undefined;
  archivedBy?: string | undefined;
  lastActivityAt?: number | undefined;
  createdAt?: string | undefined;
  updatedAt?: string | undefined;
};

export const Conversation$zodSchema: z.ZodType<Conversation> = z.object({
  _id: z.string().optional(),
  archivedBy: z.string().optional(),
  createdAt: z.iso.datetime({ offset: true }).optional(),
  failReason: z.string().optional(),
  initiator: z.string().optional(),
  isArchived: z.boolean().default(false),
  isShared: z.boolean().default(false),
  lastActivityAt: z.int().optional(),
  messages: z.array(Message$zodSchema).optional(),
  modelInfo: z.lazy(() => ModelInfo$zodSchema).optional(),
  orgId: z.string().optional(),
  shareLink: z.string().optional(),
  sharedWith: z.array(z.lazy(() => ConversationSharedWith$zodSchema))
    .optional(),
  status: ConversationStatus$zodSchema.optional(),
  title: z.string().optional(),
  updatedAt: z.iso.datetime({ offset: true }).optional(),
  userId: z.string().optional(),
}).describe(
  "A conversation represents a chat session between a user and the AI.\nConversations maintain context across multiple messages and can be\nshared, archived, and organized.\n",
);
